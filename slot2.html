<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3x3 „Çπ„É≠„ÉÉ„Éà„Ç≤„Éº„É†</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
            background-color: #1a1a1a;
            color: #fff;
            font-family: 'Arial', sans-serif;
        }
        #game-container {
            background-color: #2c2c2c;
            border-radius: 20px;
            padding: 20px 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255, 215, 0, 0.3);
            border: 2px solid #ffd700;
            text-align: center;
            width: 90%;
            max-width: 450px;
        }
        h1 {
            color: #ffd700;
            text-shadow: 0 0 5px #ffd700;
        }
        #info-panel {
            display: flex;
            justify-content: space-around;
            background: #111;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        .info-box span {
            display: block;
            font-size: 0.7em;
            color: #aaa;
        }
        #slot-machine {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            background-color: #000;
            border: 5px solid #888;
            padding: 10px;
            margin-bottom: 20px;
        }
        .cell {
            width: 100%;
            aspect-ratio: 1 / 1; /* ÂπÖ„Å®È´ò„Åï„ÇíÂêå„Åò„Å´„Åô„Çã */
            border: 2px solid #444;
            border-radius: 10px;
            font-size: clamp(24px, 10vw, 50px); /* ÁîªÈù¢„Çµ„Ç§„Ç∫„Å´Âøú„Åò„Å¶„Éï„Ç©„É≥„Éà„Çµ„Ç§„Ç∫„ÇíË™øÊï¥ */
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fff;
            color: #000;
        }
        #controls {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        #stop-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .btn {
            padding: 15px 10px;
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        #spinButton { background-color: #e63946; }
        .stop-btn { background-color: #457b9d; }
        .btn:disabled { background-color: #666; cursor: not-allowed; color: #aaa; }
        #result {
            margin-top: 15px;
            font-size: 20px;
            font-weight: bold;
            height: 50px;
            color: #f77f00;
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1>GOLD RUSH SLOT</h1>
    <div id="info-panel">
        <div class="info-box">
            <span id="coin-count">10</span>
            <span>„Ç≥„Ç§„É≥</span>
        </div>
        <div class="info-box">
            <span id="jackpot-amount">100</span>
            <span>„Ç∏„É£„ÉÉ„ÇØ„Éù„ÉÉ„Éà</span>
        </div>
    </div>

    <div id="slot-machine">
        <div class="cell" data-row="0" data-col="0">üçí</div>
        <div class="cell" data-row="0" data-col="1">üçã</div>
        <div class="cell" data-row="0" data-col="2">üçâ</div>
        <div class="cell" data-row="1" data-col="0">üîî</div>
        <div class="cell" data-row="1" data-col="1">üåü</div>
        <div class="cell" data-row="1" data-col="2">Ôºó</div>
        <div class="cell" data-row="2" data-col="0">üçí</div>
        <div class="cell" data-row="2" data-col="1">üçã</div>
        <div class="cell" data-row="2" data-col="2">üçâ</div>
    </div>

    <div id="controls">
        <button id="spinButton" class="btn">„Çπ„Éî„É≥ (Ê∂àË≤ª:1)</button>
        <div id="stop-buttons">
            <button class="btn stop-btn" data-col="0" disabled>„Çπ„Éà„ÉÉ„Éó</button>
            <button class="btn stop-btn" data-col="1" disabled>„Çπ„Éà„ÉÉ„Éó</button>
            <button class="btn stop-btn" data-col="2" disabled>„Çπ„Éà„ÉÉ„Éó</button>
        </div>
    </div>
    <p id="result"></p>
</div>

<script>
    // --- DOMË¶ÅÁ¥†„ÅÆÂèñÂæó ---
    const cells = document.querySelectorAll('.cell');
    const spinButton = document.getElementById('spinButton');
    const stopButtons = document.querySelectorAll('.stop-btn');
    const coinDisplay = document.getElementById('coin-count');
    const jackpotDisplay = document.getElementById('jackpot-amount');
    const resultDisplay = document.getElementById('result');

    // --- „Ç≤„Éº„É†Ë®≠ÂÆö ---
    const symbols = ['üçí', 'üçã', 'üçâ', 'üîî', 'üåü', 'Ôºó'];
    const payouts = {
        'üçí': 5,
        'üçã': 10,
        'üçâ': 15,
        'üîî': 20,
        'üåü': 100, // „ÅåÊèÉ„ÅÜ„Å®„Ç∏„É£„ÉÉ„ÇØ„Éù„ÉÉ„ÉàÁç≤Âæó
        'Ôºó': 777 // Ôºó„ÅåÊèÉ„ÅÜ„Å®Âõ∫ÂÆö„Åß777Êûö
    };

    // --- „Ç≤„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÁÆ°ÁêÜ„Åô„ÇãÂ§âÊï∞ ---
    let coins = 10;
    let jackpot = 100;
    let isSpinning = [false, false, false];
    let spinningIntervals = [null, null, null];

    // --- „Ç≤„Éº„É†„ÅÆÂàùÊúüÂåñ ---
    function init() {
        updateDisplays();
    }

    // --- Ë°®Á§∫„ÅÆÊõ¥Êñ∞ ---
    function updateDisplays() {
        coinDisplay.textContent = coins;
        jackpotDisplay.textContent = jackpot;
    }

    // --- „Çπ„Éî„É≥„Éú„Çø„É≥„ÅÆÂá¶ÁêÜ ---
    spinButton.addEventListener('click', () => {
        if (coins <= 0) {
            resultDisplay.textContent = "„Ç≥„Ç§„É≥„Åå„ÅÇ„Çä„Åæ„Åõ„ÇìÔºÅ";
            return;
        }
        if (isSpinning.some(s => s)) return; // „ÅÑ„Åö„Çå„Åã„ÅÆ„É™„Éº„É´„ÅåÂõûËª¢‰∏≠„Å™„Çâ‰Ωï„ÇÇ„Åó„Å™„ÅÑ

        coins--;
        jackpot += 1; // „Çπ„Éî„É≥„Åî„Å®„Å´„Ç∏„É£„ÉÉ„ÇØ„Éù„ÉÉ„Éà„Åå1Â¢ó„Åà„Çã
        updateDisplays();
        resultDisplay.textContent = "";

        spinButton.disabled = true;
        stopButtons.forEach(btn => btn.disabled = false);

        isSpinning = [true, true, true];
        for (let i = 0; i < 3; i++) {
            startSpinning(i);
        }
    });

    // --- „Çπ„Éà„ÉÉ„Éó„Éú„Çø„É≥„ÅÆÂá¶ÁêÜ ---
    stopButtons.forEach(button => {
        button.addEventListener('click', () => {
            const col = parseInt(button.dataset.col);
            if (isSpinning[col]) {
                stopSpinning(col);
                button.disabled = true;
            }

            // ÂÖ®„Å¶„ÅÆ„É™„Éº„É´„ÅåÊ≠¢„Åæ„Å£„Åü„Åã„ÉÅ„Çß„ÉÉ„ÇØ
            if (isSpinning.every(s => !s)) {
                spinButton.disabled = false;
                setTimeout(checkWin, 500); // ÁµêÊûúË°®Á§∫„ÅÆÂâç„Å´Â∞ë„ÅóÂæÖ„Å§
            }
        });
    });

    // --- „É™„Éº„É´ÂõûËª¢ÈñãÂßã ---
    function startSpinning(col) {
        spinningIntervals[col] = setInterval(() => {
            for (let row = 0; row < 3; row++) {
                const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                getCell(row, col).textContent = randomSymbol;
            }
        }, 100);
    }

    // --- „É™„Éº„É´ÂõûËª¢ÂÅúÊ≠¢ ---
    function stopSpinning(col) {
        clearInterval(spinningIntervals[col]);
        isSpinning[col] = false;
        // ÊúÄÁµÇÁöÑ„Å™ÁµµÊüÑ„ÇíÁ¢∫ÂÆö
        for (let row = 0; row < 3; row++) {
            const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
            getCell(row, col).textContent = randomSymbol;
        }
    }

    // --- ÂΩì„Åü„ÇäÂà§ÂÆö ---
    function checkWin() {
        const grid = [
            [getCell(0, 0).textContent, getCell(0, 1).textContent, getCell(0, 2).textContent],
            [getCell(1, 0).textContent, getCell(1, 1).textContent, getCell(1, 2).textContent],
            [getCell(2, 0).textContent, getCell(2, 1).textContent, getCell(2, 2).textContent]
        ];

        // Âà§ÂÆö„Åô„Çã„É©„Ç§„É≥ (Ê®™3, Á∏¶3, Êñú„ÇÅ2)
        const paylines = [
            // Ê®™
            [grid[0][0], grid[0][1], grid[0][2]],
            [grid[1][0], grid[1][1], grid[1][2]],
            [grid[2][0], grid[2][1], grid[2][2]],
            // Á∏¶
            [grid[0][0], grid[1][0], grid[2][0]],
            [grid[0][1], grid[1][1], grid[2][1]],
            [grid[0][2], grid[1][2], grid[2][2]],
            // Êñú„ÇÅ
            [grid[0][0], grid[1][1], grid[2][2]],
            [grid[0][2], grid[1][1], grid[2][0]]
        ];

        let totalWin = 0;
        let wonLines = 0;

        for (const line of paylines) {
            if (line[0] === line[1] && line[1] === line[2]) {
                const symbol = line[0];
                if (symbol === 'üåü') {
                    resultDisplay.textContent = `„Ç∏„É£„ÉÉ„ÇØ„Éù„ÉÉ„ÉàÔºÅ ${jackpot}„Ç≥„Ç§„É≥Áç≤ÂæóÔºÅ`;
                    coins += jackpot;
                    jackpot = 100; // „Ç∏„É£„ÉÉ„ÇØ„Éù„ÉÉ„Éà„Çí„É™„Çª„ÉÉ„Éà
                    totalWin += jackpot;
                } else {
                    totalWin += payouts[symbol];
                    wonLines++;
                }
            }
        }

        if (totalWin > 0) {
            if (!resultDisplay.textContent.includes('„Ç∏„É£„ÉÉ„ÇØ„Éù„ÉÉ„Éà')) {
                resultDisplay.textContent = `${wonLines}„É©„Ç§„É≥ÂΩì„Åü„ÇäÔºÅ ${totalWin}„Ç≥„Ç§„É≥Áç≤ÂæóÔºÅ`;
            }
            coins += totalWin;
        } else {
            resultDisplay.textContent = "„Åñ„Çì„Å≠„Çì...";
        }

        updateDisplays();
        if (coins <= 0) {
            resultDisplay.textContent = "„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº";
            spinButton.disabled = true;
        }
    }
    
    // ÊåáÂÆö„Åó„ÅüË°å„Å®Âàó„ÅÆ„Çª„É´„ÇíÂèñÂæó„Åô„Çã„Éò„É´„Éë„ÉºÈñ¢Êï∞
    function getCell(row, col) {
        return document.querySelector(`.cell[data-row='${row}'][data-col='${col}']`);
    }

    // „Ç≤„Éº„É†ÈñãÂßã
    init();
</script>

</body>
</html>