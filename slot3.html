<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ•ã‚£ãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ ã‚¹ãƒ­ãƒƒãƒˆ</title>
    <style>
        /* ... ä»¥å‰ã®CSSã¯çœç•¥ ... */
        body { display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px 0; background-color: #1a1a1a; color: #fff; font-family: 'Arial', sans-serif; transition: background-color 0.5s; }
        #game-container { background-color: #2c2c2c; border-radius: 20px; padding: 20px 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255, 215, 0, 0.3); border: 2px solid #ffd700; text-align: center; width: 90%; max-width: 450px; transition: all 0.5s; }
        h1 { color: #ffd700; text-shadow: 0 0 5px #ffd700; }
        #info-panel { display: flex; justify-content: space-around; background: #111; padding: 10px; border-radius: 10px; margin-bottom: 20px; font-size: 1.2em; }
        .info-box span { display: block; font-size: 0.7em; color: #aaa; }
        #slot-machine { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; background-color: #000; border: 5px solid #888; padding: 10px; margin-bottom: 20px; }
        .cell { width: 100%; aspect-ratio: 1 / 1; border: 2px solid #444; border-radius: 10px; font-size: clamp(24px, 10vw, 50px); display: flex; justify-content: center; align-items: center; background-color: #fff; color: #000; }
        #controls { display: grid; grid-template-columns: 1fr; gap: 15px; }
        #stop-buttons { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .btn { padding: 15px 10px; font-size: 18px; font-weight: bold; color: #fff; border: none; border-radius: 10px; cursor: pointer; transition: all 0.3s; }
        #spinButton { background-color: #e63946; }
        .stop-btn { background-color: #457b9d; }
        .btn:disabled { background-color: #666; cursor: not-allowed; color: #aaa; }
        #result { margin-top: 15px; font-size: 20px; font-weight: bold; height: 50px; color: #f77f00; }
        #double-up-panel { margin-top: 15px; padding: 15px; background-color: #111; border-radius: 10px; }
        #double-up-buttons { display: flex; justify-content: center; gap: 15px; }
        .double-up-btn { background-color: #0077b6; }
        
        /* â˜…â˜…â˜… ãƒ™ãƒƒãƒˆãƒœã‚¿ãƒ³ã¨ãƒ•ã‚£ãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ ç”¨ã®CSSã‚’è¿½åŠ  â˜…â˜…â˜… */
        #bet-controls { margin-bottom: 15px; }
        #betButton { background-color: #5a189a; }
        #fever-display {
            font-size: 1.5em;
            font-weight: bold;
            color: #ff00e1;
            text-shadow: 0 0 10px #ff00e1;
            height: 30px;
        }
        /* ãƒ•ã‚£ãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ ä¸­ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .fever-mode {
            background-color: #240046;
            border-color: #ff00e1;
            box-shadow: 0 0 40px rgba(255, 0, 225, 0.7);
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1>FEVER RUSH SLOT</h1>
    <div id="info-panel">
        <div class="info-box"><span id="coin-count">10</span><span>ã‚³ã‚¤ãƒ³</span></div>
        <div class="info-box"><span id="jackpot-amount">100</span><span>ã‚¸ãƒ£ãƒƒã‚¯ãƒãƒƒãƒˆ</span></div>
    </div>

    <div id="fever-display"></div>

    <div id="slot-machine">
        <div class="cell" data-row="0" data-col="0"></div><div class="cell" data-row="0" data-col="1"></div><div class="cell" data-row="0" data-col="2"></div>
        <div class="cell" data-row="1" data-col="0"></div><div class="cell" data-row="1" data-col="1"></div><div class="cell" data-row="1" data-col="2">ï¼—</div>
        <div class="cell" data-row="2" data-col="0"></div><div class="cell" data-row="2" data-col="1"></div><div class="cell" data-row="2" data-col="2"></div>
    </div>
    <div id="controls">
        <div id="bet-controls">
            <button id="betButton" class="btn">ãƒ™ãƒƒãƒˆ: 1</button>
        </div>
        <button id="spinButton" class="btn">ã‚¹ãƒ”ãƒ³</button>
        <div id="stop-buttons">
            <button class="btn stop-btn" data-col="0" disabled>ã‚¹ãƒˆãƒƒãƒ—</button>
            <button class="btn stop-btn" data-col="1" disabled>ã‚¹ãƒˆãƒƒãƒ—</button>
            <button class="btn stop-btn" data-col="2" disabled>ã‚¹ãƒˆãƒƒãƒ—</button>
        </div>
    </div>
    <p id="result"></p>
    <div id="double-up-panel" hidden></div>
</div>

<script>
    // --- DOMè¦ç´ ã®å–å¾— (è¿½åŠ ã‚ã‚Š) ---
    const gameContainer = document.getElementById('game-container'); // â˜…â˜…â˜…
    const cells = document.querySelectorAll('.cell');
    const spinButton = document.getElementById('spinButton');
    const stopButtons = document.querySelectorAll('.stop-btn');
    const coinDisplay = document.getElementById('coin-count');
    const jackpotDisplay = document.getElementById('jackpot-amount');
    const resultDisplay = document.getElementById('result');
    const doubleUpPanel = document.getElementById('double-up-panel');
    const betButton = document.getElementById('betButton'); // â˜…â˜…â˜…
    const feverDisplay = document.getElementById('fever-display'); // â˜…â˜…â˜…

    // --- ã‚²ãƒ¼ãƒ è¨­å®š (è¿½åŠ ã‚ã‚Š) ---
    const symbols = ['ğŸ’', 'ğŸ‹', 'ğŸ‰', 'ğŸ””', 'ğŸŒŸ', 'ï¼—'];
    const payouts = { 'ğŸ’': 5, 'ğŸ‹': 10, 'ğŸ‰': 15, 'ğŸ””': 20, 'ğŸŒŸ': 100, 'ï¼—': 777 };
    const betAmounts = [1, 2, 5, 10]; // â˜…â˜…â˜… ãƒ™ãƒƒãƒˆæšæ•°ã®é¸æŠè‚¢

    // --- ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹å¤‰æ•° (è¿½åŠ ã‚ã‚Š) ---
    let coins = 10;
    let jackpot = 100;
    let isSpinning = [false, false, false];
    let spinningIntervals = [null, null, null];
    let pendingWinnings = 0;
    let currentBetIndex = 0; // â˜…â˜…â˜…
    let currentBet = betAmounts[currentBetIndex]; // â˜…â˜…â˜…
    let isFeverTime = false; // â˜…â˜…â˜…
    let feverSpinsLeft = 0; // â˜…â˜…â˜…

    // --- åˆæœŸåŒ– ---
    function init() {
        updateDisplays();
        updateBetButtonText();
    }

    // --- è¡¨ç¤ºæ›´æ–° ---
    function updateDisplays() { /* å¤‰æ›´ãªã— */ }
    function updateBetButtonText() { // â˜…â˜…â˜…
        currentBet = betAmounts[currentBetIndex];
        betButton.textContent = `ãƒ™ãƒƒãƒˆ: ${currentBet}`;
        spinButton.textContent = isFeverTime ? `ç„¡æ–™ã‚¹ãƒ”ãƒ³æ®‹ã‚Š: ${feverSpinsLeft}` : `ã‚¹ãƒ”ãƒ³ (æ¶ˆè²»: ${currentBet})`;
    }

    // â˜…â˜…â˜… ãƒ™ãƒƒãƒˆãƒœã‚¿ãƒ³ã®å‡¦ç† â˜…â˜…â˜…
    betButton.addEventListener('click', () => {
        if (isSpinning.some(s => s) || !spinButton.disabled) return; // ã‚¹ãƒ”ãƒ³ä¸­ã‚„ãƒ€ãƒ–ãƒ«ã‚¢ãƒƒãƒ—ä¸­ã¯å¤‰æ›´ä¸å¯
        currentBetIndex = (currentBetIndex + 1) % betAmounts.length;
        updateBetButtonText();
    });

    // --- ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã®å‡¦ç† (ä¿®æ­£ã‚ã‚Š) â˜…â˜…â˜…
    spinButton.addEventListener('click', () => {
        if (isSpinning.some(s => s)) return;
        
        if (isFeverTime) {
            feverSpinsLeft--;
            if (feverSpinsLeft <= 0) {
                endFeverTime();
            }
        } else {
            if (coins < currentBet) {
                resultDisplay.textContent = "ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šã¾ã›ã‚“ï¼";
                return;
            }
            coins -= currentBet;
            jackpot += currentBet; // ãƒ™ãƒƒãƒˆæšæ•°åˆ†ã‚¸ãƒ£ãƒƒã‚¯ãƒãƒƒãƒˆã«åŠ ç®—
        }
        
        updateDisplays();
        updateBetButtonText();
        resultDisplay.textContent = "";

        spinButton.disabled = true;
        betButton.disabled = true; // ã‚¹ãƒ”ãƒ³ä¸­ã¯ãƒ™ãƒƒãƒˆå¤‰æ›´ä¸å¯
        stopButtons.forEach(btn => btn.disabled = false);
        isSpinning = [true, true, true];
        for (let i = 0; i < 3; i++) { startSpinning(i); }
    });

    stopButtons.forEach(button => {
        button.addEventListener('click', () => {
            const col = parseInt(button.dataset.col);
            if (isSpinning[col]) {
                stopSpinning(col);
                button.disabled = true;
            }
            if (isSpinning.every(s => !s)) {
                // ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹åŒ–ã¯å½“ãŸã‚Šåˆ¤å®šå¾Œã«è¡Œã†
                setTimeout(checkWin, 500);
            }
        });
    });

    // --- å½“ãŸã‚Šåˆ¤å®š (checkWin) ã‚’ä¿®æ­£ â˜…â˜…â˜…
    function checkWin() {
        // ... gridã¨paylinesã®å®šç¾©ã¯å¤‰æ›´ãªã— ...
        const grid = [ [getCell(0, 0).textContent, getCell(0, 1).textContent, getCell(0, 2).textContent],[getCell(1, 0).textContent, getCell(1, 1).textContent, getCell(1, 2).textContent],[getCell(2, 0).textContent, getCell(2, 1).textContent, getCell(2, 2).textContent] ];
        const paylines = [ [grid[0][0], grid[0][1], grid[0][2]], [grid[1][0], grid[1][1], grid[1][2]], [grid[2][0], grid[2][1], grid[2][2]], [grid[0][0], grid[1][0], grid[2][0]], [grid[0][1], grid[1][1], grid[2][1]], [grid[0][2], grid[1][2], grid[2][2]], [grid[0][0], grid[1][1], grid[2][2]], [grid[0][2], grid[1][1], grid[2][0]] ];

        let totalWin = 0;
        let isJackpot = false;

        for (const line of paylines) {
            if (line[0] === line[1] && line[1] === line[2]) {
                const symbol = line[0];
                if (symbol === 'ğŸŒŸ') {
                    totalWin += jackpot;
                    isJackpot = true;
                } else {
                    totalWin += payouts[symbol] * currentBet; // â˜…â˜…â˜… ãƒ™ãƒƒãƒˆæšæ•°ã§é…å½“ãŒå€ã«ï¼
                }
            }
        }

        if (totalWin > 0) {
            // ... ãƒ€ãƒ–ãƒ«ã‚¢ãƒƒãƒ—ã¸ã®ç§»è¡Œå‡¦ç†ãªã©ã¯å¤‰æ›´ãªã— ...
        } else {
            resultDisplay.textContent = "ã–ã‚“ã­ã‚“...";
            // â˜…â˜…â˜… å½“ãŸã‚ŠãŒãªãã¦ã‚‚ãƒ•ã‚£ãƒ¼ãƒãƒ¼åˆ¤å®šã¨ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼åˆ¤å®šã¯è¡Œã†
            if (!isFeverTime) {
                checkForFeverTime();
            }
            checkGameOver();
            spinButton.disabled = false;
            betButton.disabled = false;
        }
    }

    // â˜…â˜…â˜… ã“ã“ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®é–¢æ•° â˜…â˜…â˜…
    function checkForFeverTime() {
        const symbolsOnGrid = new Set();
        cells.forEach(cell => {
            symbolsOnGrid.add(cell.textContent);
        });

        // å…¨6ç¨®é¡ã®çµµæŸ„ãŒæƒã£ãŸã‚‰ãƒ•ã‚£ãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ çªå…¥
        if (symbolsOnGrid.size === symbols.length) {
            startFeverTime();
            return true; // ãƒ•ã‚£ãƒ¼ãƒãƒ¼ã«çªå…¥ã—ãŸã“ã¨ã‚’ä¼ãˆã‚‹
        }
        return false;
    }

    function startFeverTime() {
        isFeverTime = true;
        feverSpinsLeft = 10;
        feverDisplay.textContent = "FEVER TIME!";
        gameContainer.classList.add('fever-mode');
        updateBetButtonText();
    }

    function endFeverTime() {
        isFeverTime = false;
        feverDisplay.textContent = "";
        gameContainer.classList.remove('fever-mode');
        resultDisplay.textContent = "ãƒ•ã‚£ãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ çµ‚äº†ï¼";
        updateBetButtonText();
    }

    // --- ãã®ä»–ã€å¤‰æ›´ã®ãªã„é–¢æ•°ã¯çœç•¥ ---
    function getCell(row, col) { return document.querySelector(`.cell[data-row='${row}'][data-col='${col}']`); }
    function checkGameOver() { /* å¤‰æ›´ãªã— */ }
    function startSpinning(col) { /* å¤‰æ›´ãªã— */ }
    function stopSpinning(col) { /* å¤‰æ›´ãªã— */ }
    // ãƒ€ãƒ–ãƒ«ã‚¢ãƒƒãƒ—é–¢é€£ã®é–¢æ•°ã‚‚å¤‰æ›´ãªã—
    
    // ã‚²ãƒ¼ãƒ é–‹å§‹
    init();
</script>

</body>
</html>